package test

import generators.ModelFactory.Companion.generatePatients
import models.PatientChangedInterface
import models.PatientState
import models.VitalSignDatum

class TestPatientChangedInterface: PatientChangedInterface {
    override fun onPatientValueChanged(id: Int, vId: Int, oldValue: Double, newValue: Double, time: Int) {
        printMethod("onPatientValueChanged", id, vId, oldValue, newValue, time)
    }

    override fun onPatientAlarmLevelChanged(id: Int, vId: Int, oldValue: Int, newValue: Int, time: Int) {
        printMethod("onPatientAlarmLevelChanged", id, vId, oldValue, newValue, time)
    }

    override fun onPatientSensorFailure(id: Int, vId: Int, oldValue: Boolean, newValue: Boolean, time: Int) {
        printMethod("onPatientSensorFailure", id, vId, oldValue, newValue, time)
    }

    override fun onPatientStateChanged(id: Int, oldValue: PatientState, newValue: PatientState, time: Int) {
        printMethod("onPatientStateChanged", id, -1, oldValue, newValue, time)
    }

    fun printMethod(funName: String, id: Int, vId: Int, oldValue: Any, newValue: Any, time: Int) {
        System.err.println("$funName:: P$id: V$vId: $oldValue -> $newValue (@$time)")
    }
}

fun main(args: Array<String>) {
    val testPatientChangedInterface = TestPatientChangedInterface()

    val patients = generatePatients(2)
    val data1 = mutableListOf(VitalSignDatum(0), VitalSignDatum(10, 20.0), VitalSignDatum(20, 100.0))
    val data2 = mutableListOf(VitalSignDatum(0), VitalSignDatum(10, 0.0), VitalSignDatum(20, 50.0))

    patients[0].vitalSigns[0].data.setAll(data1)
    patients[1].vitalSigns[1].data.setAll(data2)

    patients.forEach {
        it.updateListeners()
        it.patientChangedInterface = testPatientChangedInterface
    }

    for (t in 1..100) {
        patients.forEach { it.step() }
    }

}

/* Output

onPatientValueChanged:: P0: V0: 50.0 -> 47.0 (@1)
onPatientValueChanged:: P1: V1: 50.0 -> 45.0 (@1)
onPatientValueChanged:: P0: V0: 47.0 -> 44.0 (@2)
onPatientValueChanged:: P1: V1: 45.0 -> 40.0 (@2)
onPatientValueChanged:: P0: V0: 44.0 -> 41.0 (@3)
onPatientValueChanged:: P1: V1: 40.0 -> 35.0 (@3)
onPatientStateChanged:: P1: V-1: HEALTHY -> DETERIORATING (@3)
onPatientAlarmLevelChanged:: P1: V1: 0 -> 1 (@3)
onPatientValueChanged:: P0: V0: 41.0 -> 38.0 (@4)
onPatientStateChanged:: P0: V-1: HEALTHY -> DETERIORATING (@4)
onPatientAlarmLevelChanged:: P0: V0: 0 -> 1 (@4)
onPatientValueChanged:: P1: V1: 35.0 -> 30.0 (@4)
onPatientValueChanged:: P0: V0: 38.0 -> 35.0 (@5)
onPatientValueChanged:: P1: V1: 30.0 -> 25.0 (@5)
onPatientStateChanged:: P1: V-1: DETERIORATING -> SICK (@5)
onPatientAlarmLevelChanged:: P1: V1: 1 -> 2 (@5)
onPatientValueChanged:: P0: V0: 35.0 -> 32.0 (@6)
onPatientValueChanged:: P1: V1: 25.0 -> 20.0 (@6)
onPatientValueChanged:: P0: V0: 32.0 -> 29.0 (@7)
onPatientStateChanged:: P0: V-1: DETERIORATING -> SICK (@7)
onPatientAlarmLevelChanged:: P0: V0: 1 -> 2 (@7)
onPatientValueChanged:: P1: V1: 20.0 -> 15.0 (@7)
onPatientAlarmLevelChanged:: P1: V1: 2 -> 3 (@7)
onPatientValueChanged:: P0: V0: 29.0 -> 26.0 (@8)
onPatientValueChanged:: P1: V1: 15.0 -> 10.0 (@8)
onPatientValueChanged:: P0: V0: 26.0 -> 23.0 (@9)
onPatientValueChanged:: P1: V1: 10.0 -> 5.0 (@9)
onPatientValueChanged:: P0: V0: 23.0 -> 20.0 (@10)
onPatientValueChanged:: P1: V1: 5.0 -> 0.0 (@10)
onPatientValueChanged:: P0: V0: 20.0 -> 28.0 (@11)
onPatientValueChanged:: P1: V1: 0.0 -> 5.0 (@11)
onPatientValueChanged:: P0: V0: 28.0 -> 36.0 (@12)
onPatientStateChanged:: P0: V-1: SICK -> DETERIORATING (@12)
onPatientAlarmLevelChanged:: P0: V0: 2 -> 1 (@12)
onPatientValueChanged:: P1: V1: 5.0 -> 10.0 (@12)
onPatientValueChanged:: P0: V0: 36.0 -> 44.0 (@13)
onPatientStateChanged:: P0: V-1: DETERIORATING -> HEALTHY (@13)
onPatientAlarmLevelChanged:: P0: V0: 1 -> 0 (@13)
onPatientValueChanged:: P1: V1: 10.0 -> 15.0 (@13)
onPatientValueChanged:: P0: V0: 44.0 -> 52.0 (@14)
onPatientValueChanged:: P1: V1: 15.0 -> 20.0 (@14)
onPatientAlarmLevelChanged:: P1: V1: 3 -> 2 (@14)
onPatientValueChanged:: P0: V0: 52.0 -> 60.0 (@15)
onPatientValueChanged:: P1: V1: 20.0 -> 25.0 (@15)
onPatientValueChanged:: P0: V0: 60.0 -> 68.0 (@16)
onPatientStateChanged:: P0: V-1: HEALTHY -> DETERIORATING (@16)
onPatientAlarmLevelChanged:: P0: V0: 0 -> 1 (@16)
onPatientValueChanged:: P1: V1: 25.0 -> 30.0 (@16)
onPatientStateChanged:: P1: V-1: SICK -> DETERIORATING (@16)
onPatientAlarmLevelChanged:: P1: V1: 2 -> 1 (@16)
onPatientValueChanged:: P0: V0: 68.0 -> 76.0 (@17)
onPatientStateChanged:: P0: V-1: DETERIORATING -> SICK (@17)
onPatientAlarmLevelChanged:: P0: V0: 1 -> 2 (@17)
onPatientValueChanged:: P1: V1: 30.0 -> 35.0 (@17)
onPatientValueChanged:: P0: V0: 76.0 -> 84.0 (@18)
onPatientAlarmLevelChanged:: P0: V0: 2 -> 3 (@18)
onPatientValueChanged:: P1: V1: 35.0 -> 40.0 (@18)
onPatientStateChanged:: P1: V-1: DETERIORATING -> HEALTHY (@18)
onPatientAlarmLevelChanged:: P1: V1: 1 -> 0 (@18)
onPatientValueChanged:: P0: V0: 84.0 -> 92.0 (@19)
onPatientValueChanged:: P1: V1: 40.0 -> 45.0 (@19)
onPatientValueChanged:: P0: V0: 92.0 -> 100.0 (@20)
onPatientValueChanged:: P1: V1: 45.0 -> 50.0 (@20)
onPatientValueChanged:: P0: V0: 100.0 -> 108.0 (@21)
onPatientValueChanged:: P1: V1: 50.0 -> 55.0 (@21)
onPatientValueChanged:: P0: V0: 108.0 -> 116.0 (@22)
onPatientValueChanged:: P1: V1: 55.0 -> 60.0 (@22)
onPatientValueChanged:: P0: V0: 116.0 -> 124.0 (@23)
onPatientValueChanged:: P1: V1: 60.0 -> 65.0 (@23)
onPatientStateChanged:: P1: V-1: HEALTHY -> DETERIORATING (@23)
onPatientAlarmLevelChanged:: P1: V1: 0 -> 1 (@23)
onPatientValueChanged:: P0: V0: 124.0 -> 132.0 (@24)
onPatientValueChanged:: P1: V1: 65.0 -> 70.0 (@24)
onPatientValueChanged:: P0: V0: 132.0 -> 140.0 (@25)
onPatientValueChanged:: P1: V1: 70.0 -> 75.0 (@25)
onPatientStateChanged:: P1: V-1: DETERIORATING -> SICK (@25)
onPatientAlarmLevelChanged:: P1: V1: 1 -> 2 (@25)
onPatientValueChanged:: P0: V0: 140.0 -> 148.0 (@26)
onPatientValueChanged:: P1: V1: 75.0 -> 80.0 (@26)
onPatientValueChanged:: P0: V0: 148.0 -> 156.0 (@27)
onPatientValueChanged:: P1: V1: 80.0 -> 85.0 (@27)
onPatientAlarmLevelChanged:: P1: V1: 2 -> 3 (@27)
onPatientValueChanged:: P0: V0: 156.0 -> 164.0 (@28)
onPatientValueChanged:: P1: V1: 85.0 -> 90.0 (@28)
onPatientValueChanged:: P0: V0: 164.0 -> 172.0 (@29)
onPatientValueChanged:: P1: V1: 90.0 -> 95.0 (@29)
onPatientValueChanged:: P0: V0: 172.0 -> 180.0 (@30)
onPatientValueChanged:: P1: V1: 95.0 -> 100.0 (@30)
onPatientValueChanged:: P0: V0: 180.0 -> 188.0 (@31)
onPatientValueChanged:: P1: V1: 100.0 -> 105.0 (@31)
onPatientValueChanged:: P0: V0: 188.0 -> 196.0 (@32)
onPatientValueChanged:: P1: V1: 105.0 -> 110.0 (@32)
onPatientValueChanged:: P0: V0: 196.0 -> 204.0 (@33)
onPatientValueChanged:: P1: V1: 110.0 -> 115.0 (@33)
onPatientValueChanged:: P0: V0: 204.0 -> 212.0 (@34)
onPatientValueChanged:: P1: V1: 115.0 -> 120.0 (@34)
onPatientValueChanged:: P0: V0: 212.0 -> 220.0 (@35)
onPatientValueChanged:: P1: V1: 120.0 -> 125.0 (@35)
onPatientValueChanged:: P0: V0: 220.0 -> 228.0 (@36)
onPatientValueChanged:: P1: V1: 125.0 -> 130.0 (@36)
onPatientValueChanged:: P0: V0: 228.0 -> 236.0 (@37)
onPatientValueChanged:: P1: V1: 130.0 -> 135.0 (@37)
onPatientValueChanged:: P0: V0: 236.0 -> 244.0 (@38)
onPatientValueChanged:: P1: V1: 135.0 -> 140.0 (@38)
onPatientValueChanged:: P0: V0: 244.0 -> 252.0 (@39)
onPatientValueChanged:: P1: V1: 140.0 -> 145.0 (@39)
onPatientValueChanged:: P0: V0: 252.0 -> 260.0 (@40)
onPatientValueChanged:: P1: V1: 145.0 -> 150.0 (@40)
onPatientValueChanged:: P0: V0: 260.0 -> 268.0 (@41)
onPatientValueChanged:: P1: V1: 150.0 -> 155.0 (@41)
onPatientValueChanged:: P0: V0: 268.0 -> 276.0 (@42)
onPatientValueChanged:: P1: V1: 155.0 -> 160.0 (@42)
onPatientValueChanged:: P0: V0: 276.0 -> 284.0 (@43)
onPatientValueChanged:: P1: V1: 160.0 -> 165.0 (@43)
onPatientValueChanged:: P0: V0: 284.0 -> 292.0 (@44)
onPatientValueChanged:: P1: V1: 165.0 -> 170.0 (@44)
onPatientValueChanged:: P0: V0: 292.0 -> 300.0 (@45)
onPatientValueChanged:: P1: V1: 170.0 -> 175.0 (@45)
onPatientValueChanged:: P0: V0: 300.0 -> 308.0 (@46)
onPatientValueChanged:: P1: V1: 175.0 -> 180.0 (@46)
onPatientValueChanged:: P0: V0: 308.0 -> 316.0 (@47)
onPatientValueChanged:: P1: V1: 180.0 -> 185.0 (@47)
onPatientValueChanged:: P0: V0: 316.0 -> 324.0 (@48)
onPatientValueChanged:: P1: V1: 185.0 -> 190.0 (@48)
onPatientValueChanged:: P0: V0: 324.0 -> 332.0 (@49)
onPatientValueChanged:: P1: V1: 190.0 -> 195.0 (@49)
onPatientValueChanged:: P0: V0: 332.0 -> 340.0 (@50)
onPatientValueChanged:: P1: V1: 195.0 -> 200.0 (@50)
onPatientValueChanged:: P0: V0: 340.0 -> 348.0 (@51)
onPatientValueChanged:: P1: V1: 200.0 -> 205.0 (@51)
onPatientValueChanged:: P0: V0: 348.0 -> 356.0 (@52)
onPatientValueChanged:: P1: V1: 205.0 -> 210.0 (@52)
onPatientValueChanged:: P0: V0: 356.0 -> 364.0 (@53)
onPatientValueChanged:: P1: V1: 210.0 -> 215.0 (@53)
onPatientValueChanged:: P0: V0: 364.0 -> 372.0 (@54)
onPatientValueChanged:: P1: V1: 215.0 -> 220.0 (@54)
onPatientValueChanged:: P0: V0: 372.0 -> 380.0 (@55)
onPatientValueChanged:: P1: V1: 220.0 -> 225.0 (@55)
onPatientValueChanged:: P0: V0: 380.0 -> 388.0 (@56)
onPatientValueChanged:: P1: V1: 225.0 -> 230.0 (@56)
onPatientValueChanged:: P0: V0: 388.0 -> 396.0 (@57)
onPatientValueChanged:: P1: V1: 230.0 -> 235.0 (@57)
onPatientValueChanged:: P0: V0: 396.0 -> 404.0 (@58)
onPatientValueChanged:: P1: V1: 235.0 -> 240.0 (@58)
onPatientValueChanged:: P0: V0: 404.0 -> 412.0 (@59)
onPatientValueChanged:: P1: V1: 240.0 -> 245.0 (@59)
onPatientValueChanged:: P0: V0: 412.0 -> 420.0 (@60)
onPatientValueChanged:: P1: V1: 245.0 -> 250.0 (@60)
onPatientValueChanged:: P0: V0: 420.0 -> 428.0 (@61)
onPatientValueChanged:: P1: V1: 250.0 -> 255.0 (@61)
onPatientValueChanged:: P0: V0: 428.0 -> 436.0 (@62)
onPatientValueChanged:: P1: V1: 255.0 -> 260.0 (@62)
onPatientValueChanged:: P0: V0: 436.0 -> 444.0 (@63)
onPatientValueChanged:: P1: V1: 260.0 -> 265.0 (@63)
onPatientValueChanged:: P0: V0: 444.0 -> 452.0 (@64)
onPatientValueChanged:: P1: V1: 265.0 -> 270.0 (@64)
onPatientValueChanged:: P0: V0: 452.0 -> 460.0 (@65)
onPatientValueChanged:: P1: V1: 270.0 -> 275.0 (@65)
onPatientValueChanged:: P0: V0: 460.0 -> 468.0 (@66)
onPatientValueChanged:: P1: V1: 275.0 -> 280.0 (@66)
onPatientValueChanged:: P0: V0: 468.0 -> 476.0 (@67)
onPatientValueChanged:: P1: V1: 280.0 -> 285.0 (@67)
onPatientValueChanged:: P0: V0: 476.0 -> 484.0 (@68)
onPatientValueChanged:: P1: V1: 285.0 -> 290.0 (@68)
onPatientValueChanged:: P0: V0: 484.0 -> 492.0 (@69)
onPatientValueChanged:: P1: V1: 290.0 -> 295.0 (@69)
onPatientValueChanged:: P0: V0: 492.0 -> 500.0 (@70)
onPatientValueChanged:: P1: V1: 295.0 -> 300.0 (@70)
onPatientValueChanged:: P0: V0: 500.0 -> 508.0 (@71)
onPatientValueChanged:: P1: V1: 300.0 -> 305.0 (@71)
onPatientValueChanged:: P0: V0: 508.0 -> 516.0 (@72)
onPatientValueChanged:: P1: V1: 305.0 -> 310.0 (@72)
onPatientValueChanged:: P0: V0: 516.0 -> 524.0 (@73)
onPatientValueChanged:: P1: V1: 310.0 -> 315.0 (@73)
onPatientValueChanged:: P0: V0: 524.0 -> 532.0 (@74)
onPatientValueChanged:: P1: V1: 315.0 -> 320.0 (@74)
onPatientValueChanged:: P0: V0: 532.0 -> 540.0 (@75)
onPatientValueChanged:: P1: V1: 320.0 -> 325.0 (@75)
onPatientValueChanged:: P0: V0: 540.0 -> 548.0 (@76)
onPatientValueChanged:: P1: V1: 325.0 -> 330.0 (@76)
onPatientValueChanged:: P0: V0: 548.0 -> 556.0 (@77)
onPatientValueChanged:: P1: V1: 330.0 -> 335.0 (@77)
onPatientValueChanged:: P0: V0: 556.0 -> 564.0 (@78)
onPatientValueChanged:: P1: V1: 335.0 -> 340.0 (@78)
onPatientValueChanged:: P0: V0: 564.0 -> 572.0 (@79)
onPatientValueChanged:: P1: V1: 340.0 -> 345.0 (@79)
onPatientValueChanged:: P0: V0: 572.0 -> 580.0 (@80)
onPatientValueChanged:: P1: V1: 345.0 -> 350.0 (@80)
onPatientValueChanged:: P0: V0: 580.0 -> 588.0 (@81)
onPatientValueChanged:: P1: V1: 350.0 -> 355.0 (@81)
onPatientValueChanged:: P0: V0: 588.0 -> 596.0 (@82)
onPatientValueChanged:: P1: V1: 355.0 -> 360.0 (@82)
onPatientValueChanged:: P0: V0: 596.0 -> 604.0 (@83)
onPatientValueChanged:: P1: V1: 360.0 -> 365.0 (@83)
onPatientValueChanged:: P0: V0: 604.0 -> 612.0 (@84)
onPatientValueChanged:: P1: V1: 365.0 -> 370.0 (@84)
onPatientValueChanged:: P0: V0: 612.0 -> 620.0 (@85)
onPatientValueChanged:: P1: V1: 370.0 -> 375.0 (@85)
onPatientValueChanged:: P0: V0: 620.0 -> 628.0 (@86)
onPatientValueChanged:: P1: V1: 375.0 -> 380.0 (@86)
onPatientValueChanged:: P0: V0: 628.0 -> 636.0 (@87)
onPatientValueChanged:: P1: V1: 380.0 -> 385.0 (@87)
onPatientValueChanged:: P0: V0: 636.0 -> 644.0 (@88)
onPatientValueChanged:: P1: V1: 385.0 -> 390.0 (@88)
onPatientValueChanged:: P0: V0: 644.0 -> 652.0 (@89)
onPatientValueChanged:: P1: V1: 390.0 -> 395.0 (@89)
onPatientValueChanged:: P0: V0: 652.0 -> 660.0 (@90)
onPatientValueChanged:: P1: V1: 395.0 -> 400.0 (@90)
onPatientValueChanged:: P0: V0: 660.0 -> 668.0 (@91)
onPatientValueChanged:: P1: V1: 400.0 -> 405.0 (@91)
onPatientValueChanged:: P0: V0: 668.0 -> 676.0 (@92)
onPatientValueChanged:: P1: V1: 405.0 -> 410.0 (@92)
onPatientValueChanged:: P0: V0: 676.0 -> 684.0 (@93)
onPatientValueChanged:: P1: V1: 410.0 -> 415.0 (@93)
onPatientValueChanged:: P0: V0: 684.0 -> 692.0 (@94)
onPatientValueChanged:: P1: V1: 415.0 -> 420.0 (@94)
onPatientValueChanged:: P0: V0: 692.0 -> 700.0 (@95)
onPatientValueChanged:: P1: V1: 420.0 -> 425.0 (@95)
onPatientValueChanged:: P0: V0: 700.0 -> 708.0 (@96)
onPatientValueChanged:: P1: V1: 425.0 -> 430.0 (@96)
onPatientValueChanged:: P0: V0: 708.0 -> 716.0 (@97)
onPatientValueChanged:: P1: V1: 430.0 -> 435.0 (@97)
onPatientValueChanged:: P0: V0: 716.0 -> 724.0 (@98)
onPatientValueChanged:: P1: V1: 435.0 -> 440.0 (@98)
onPatientValueChanged:: P0: V0: 724.0 -> 732.0 (@99)
onPatientValueChanged:: P1: V1: 440.0 -> 445.0 (@99)
onPatientValueChanged:: P0: V0: 732.0 -> 740.0 (@100)
onPatientValueChanged:: P1: V1: 445.0 -> 450.0 (@100)

 */